{"instruction": "Refactor this nested if-else chain for better readability", "response": "```python\n# Before (hard to read):\ndef get_discount(customer):\n    if customer.is_premium:\n        if customer.years > 5:\n            return 0.20\n        else:\n            return 0.15\n    else:\n        if customer.orders > 10:\n            return 0.10\n        else:\n            return 0.05\n\n# After (early returns, cleaner):\ndef get_discount(customer):\n    if customer.is_premium:\n        return 0.20 if customer.years > 5 else 0.15\n    return 0.10 if customer.orders > 10 else 0.05\n\n# Or use dictionary mapping:\nDISCOUNT_RULES = {\n    ('premium', 'long_term'): 0.20,\n    ('premium', 'regular'): 0.15,\n    ('standard', 'frequent'): 0.10,\n    ('standard', 'occasional'): 0.05\n}\n```"}
{"instruction": "Optimize this database query that's running slow", "response": "```sql\n-- Before (slow - no indexes, SELECT *):\nSELECT * FROM orders o\nWHERE o.user_id = 123\nAND o.status = 'pending'\nAND o.created_at > '2025-01-01';\n\n-- After (optimized):\n-- 1. Add indexes:\nCREATE INDEX idx_orders_user_status ON orders(user_id, status);\nCREATE INDEX idx_orders_created_at ON orders(created_at);\n\n-- 2. Select only needed columns:\nSELECT o.id, o.total, o.created_at\nFROM orders o\nWHERE o.user_id = 123\n  AND o.status = 'pending'\n  AND o.created_at > '2025-01-01'\nLIMIT 100;  -- Add pagination\n\n-- 3. Use prepared statements to avoid SQL injection\n```"}
